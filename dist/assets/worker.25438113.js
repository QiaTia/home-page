(function(){"use strict";function n(s){if(!/data:[\w\/-]+;base64/.test(s))throw"\u672A\u627E\u5230\u6587\u4EF6MIME, \u8BF7\u68C0\u67E5\u5185\u5BB9!";const[a,o]=s.split(","),e=self.atob(o);let t=e.length;const r=new Uint8Array(new ArrayBuffer(t));for(;t--;)r[t]=e.charCodeAt(t);return new Blob([r],{type:a.match(/[\w\/-]+(?=;)/)[0]})}function l(s){let a=s.length;const o=new Uint8Array(new ArrayBuffer(a));for(;a--;)o[a]=s.charCodeAt(a);return new Blob([o],{type:"text/plain"})}self.onmessage=function(s){const{payload:a,event:o}=s.data;switch(console.log("Child process received task -> ",o),o){case"ftob":{const e=new FileReader;e.onload=()=>{const t={event:o};a.size>=1024*1024*2?(t.event="btof",t.payload=l(e.result),t.notify="\u6587\u4EF6\u4F53\u79EF\u8FC7\u5927, \u81EA\u52A8\u751F\u6210\u6587\u672C\u6587\u4EF6!"):t.payload=e.result,self.postMessage(t)},e.onerror=t=>self.postMessage({error:t,event:o}),e.readAsDataURL(a);break}case"btoa":{const e={event:o};try{e.payload=self.btoa(a)}catch(t){e.error=t}self.postMessage(e);break}case"atob":{const e={event:o};try{e.payload=self.atob(self.decodeURIComponent(a))}catch(t){e.error=t}self.postMessage(e);break}case"btof":{const e={event:o};try{e.payload=n(a)}catch(t){e.error=t}self.postMessage(e);break}default:throw console.log(s.data),s.data}}})();
